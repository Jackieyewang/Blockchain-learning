{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LoggerProviderBase = exports.ServiceLoggerBase = exports.DiagnosticsLoggerBase = exports.LogLevel = exports.LogStyle = void 0;\nvar LogStyle;\n\n(function (LogStyle) {\n  LogStyle[\"verbose\"] = \"info\";\n  LogStyle[\"info\"] = \"info\";\n  LogStyle[\"imp\"] = \"imp\";\n  LogStyle[\"warn\"] = \"warn\";\n  LogStyle[\"err\"] = \"err\";\n})(LogStyle = exports.LogStyle || (exports.LogStyle = {}));\n\nvar LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"verbose\"] = 0] = \"verbose\";\n  LogLevel[LogLevel[\"debug\"] = 1] = \"debug\";\n  LogLevel[LogLevel[\"important\"] = 2] = \"important\";\n  LogLevel[LogLevel[\"warn\"] = 3] = \"warn\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n\nclass DiagnosticsLoggerBase {\n  constructor(logLevel, logToFiles, fileLogger) {\n    this.logLevel = logLevel;\n    this.includeStackTrace = this.logLevel <= LogLevel.debug ? true : false;\n    this.logToFiles = logToFiles;\n    this.fileLogger = fileLogger;\n  }\n\n  write(content) {\n    this.debug(content);\n  }\n\n  verbose(content) {\n    if (this.logLevel > LogLevel.verbose) {\n      return;\n    }\n\n    this.log(LogStyle.verbose, content);\n  }\n\n  debug(content) {\n    if (this.logLevel > LogLevel.debug) {\n      return;\n    }\n\n    this.log(LogStyle.info, content);\n  }\n\n  imp(content) {\n    if (this.logLevel > LogLevel.important) {\n      return;\n    }\n\n    this.log(LogStyle.imp, content);\n  }\n\n  warn(content) {\n    this.log(LogStyle.warn, content);\n  }\n\n  err(content) {\n    this.log(LogStyle.err, content);\n  }\n\n  log(style, content) {\n    throw new Error('Not implmented in base class');\n  }\n\n}\n\nexports.DiagnosticsLoggerBase = DiagnosticsLoggerBase;\n\nclass ServiceLoggerBase {\n  constructor(service, logLevel, logToFiles, stream) {\n    this.service = service;\n    this.logLevel = logLevel;\n    this.logToFiles = logToFiles;\n    this.stream = stream;\n    this.logToConsole = this.logLevel <= LogLevel.debug;\n  }\n\n  log(serviceLog) {\n    this.write(this.format(serviceLog));\n  }\n\n  write(message) {\n    const now = new Date();\n    message = `[${now.toUTCString()}] service=${this.service} ${message}`;\n\n    if (this.logToConsole) {\n      console.log(message);\n    }\n  }\n\n  format(serviceLog) {\n    throw new Error('Not implmented in base class');\n  }\n\n}\n\nexports.ServiceLoggerBase = ServiceLoggerBase;\nconst DEFAULT_LOG_CONFIG = {\n  logLevel: LogLevel.important,\n  logToFiles: false\n};\n\nclass LoggerProviderBase {\n  constructor(config = {}, fileLoggerFactory) {\n    this.config = {\n      logLevel: config.logLevel !== undefined ? config.logLevel : DEFAULT_LOG_CONFIG.logLevel,\n      logToFiles: config.logToFiles !== undefined ? config.logToFiles : DEFAULT_LOG_CONFIG.logToFiles,\n      logDirectory: config.logDirectory\n    };\n    this._fileLoggerFactory = fileLoggerFactory;\n\n    if (this.config.logToFiles && !this._fileLoggerFactory) {\n      throw new Error(\"Must provide a FileLoggerFactory in order to log to files\");\n    }\n\n    this._diagnosticLogger = this._makeDiagnosticLogger();\n  }\n\n  _makeDiagnosticLogger() {\n    throw new Error('Not implmented in base class');\n  }\n\n  getDiagnosticsLogger() {\n    return this._diagnosticLogger;\n  }\n\n  makeServiceLogger(serviceName) {\n    throw new Error('Not implmented in base class');\n  }\n\n}\n\nexports.LoggerProviderBase = LoggerProviderBase;","map":{"version":3,"sources":["../src/logger-base.ts"],"names":[],"mappings":";;;;;;AAAA,IAAY,QAAZ;;AAAA,CAAA,UAAY,QAAZ,EAAoB;AAClB,EAAA,QAAA,CAAA,SAAA,CAAA,GAAA,MAAA;AACA,EAAA,QAAA,CAAA,MAAA,CAAA,GAAA,MAAA;AACA,EAAA,QAAA,CAAA,KAAA,CAAA,GAAA,KAAA;AACA,EAAA,QAAA,CAAA,MAAA,CAAA,GAAA,MAAA;AACA,EAAA,QAAA,CAAA,KAAA,CAAA,GAAA,KAAA;AACD,CAND,EAAY,QAAQ,GAAR,OAAA,CAAA,QAAA,KAAA,OAAA,CAAA,QAAA,GAAQ,EAAR,CAAZ;;AAQA,IAAY,QAAZ;;AAAA,CAAA,UAAY,QAAZ,EAAoB;AAClB,EAAA,QAAA,CAAA,QAAA,CAAA,SAAA,CAAA,GAAA,CAAA,CAAA,GAAA,SAAA;AACA,EAAA,QAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA,GAAA,OAAA;AACA,EAAA,QAAA,CAAA,QAAA,CAAA,WAAA,CAAA,GAAA,CAAA,CAAA,GAAA,WAAA;AACA,EAAA,QAAA,CAAA,QAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,GAAA,MAAA;AACD,CALD,EAAY,QAAQ,GAAR,OAAA,CAAA,QAAA,KAAA,OAAA,CAAA,QAAA,GAAQ,EAAR,CAAZ;;AAcA,MAAa,qBAAb,CAAkC;AAOhC,EAAA,WAAA,CAAY,QAAZ,EAAgC,UAAhC,EAAqD,UAArD,EAAiF;AAC/E,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,iBAAL,GAAyB,KAAK,QAAL,IAAiB,QAAQ,CAAC,KAA1B,GAAkC,IAAlC,GAAyC,KAAlE;AACA,SAAK,UAAL,GAAkB,UAAlB;AACA,SAAK,UAAL,GAAkB,UAAlB;AACD;;AAMM,EAAA,KAAK,CAAC,OAAD,EAAkD;AAC5D,SAAK,KAAL,CAAW,OAAX;AACD;;AAEM,EAAA,OAAO,CAAC,OAAD,EAAkD;AAC9D,QAAI,KAAK,QAAL,GAAgB,QAAQ,CAAC,OAA7B,EAAsC;AACpC;AACD;;AACD,SAAK,GAAL,CAAS,QAAQ,CAAC,OAAlB,EAA2B,OAA3B;AACD;;AAEM,EAAA,KAAK,CAAC,OAAD,EAAkD;AAC5D,QAAI,KAAK,QAAL,GAAgB,QAAQ,CAAC,KAA7B,EAAoC;AAClC;AACD;;AACD,SAAK,GAAL,CAAS,QAAQ,CAAC,IAAlB,EAAwB,OAAxB;AACD;;AAEM,EAAA,GAAG,CAAC,OAAD,EAAkD;AAC1D,QAAI,KAAK,QAAL,GAAgB,QAAQ,CAAC,SAA7B,EAAwC;AACtC;AACD;;AACD,SAAK,GAAL,CAAS,QAAQ,CAAC,GAAlB,EAAuB,OAAvB;AACD;;AAEM,EAAA,IAAI,CAAC,OAAD,EAAkD;AAC3D,SAAK,GAAL,CAAS,QAAQ,CAAC,IAAlB,EAAwB,OAAxB;AACD;;AAEM,EAAA,GAAG,CAAC,OAAD,EAAkD;AAC1D,SAAK,GAAL,CAAS,QAAQ,CAAC,GAAlB,EAAuB,OAAvB;AACD;;AAEM,EAAA,GAAG,CAAC,KAAD,EAAkB,OAAlB,EAAmE;AAC3E,UAAM,IAAI,KAAJ,CAAU,8BAAV,CAAN;AACD;;AArD+B;;AAAlC,OAAA,CAAA,qBAAA,GAAA,qBAAA;;AA+DA,MAAa,iBAAb,CAA8B;AAS5B,EAAA,WAAA,CAAY,OAAZ,EAA6B,QAA7B,EAAiD,UAAjD,EAAsE,MAAtE,EAA8F;AAC5F,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,QAAL,GAAgB,QAAhB;AACA,SAAK,UAAL,GAAkB,UAAlB;AACA,SAAK,MAAL,GAAc,MAAd;AAEA,SAAK,YAAL,GAAoB,KAAK,QAAL,IAAiB,QAAQ,CAAC,KAA9C;AACD;;AAMM,EAAA,GAAG,CAAC,UAAD,EAAuB;AAC/B,SAAK,KAAL,CAAW,KAAK,MAAL,CAAY,UAAZ,CAAX;AACD;;AAMM,EAAA,KAAK,CAAC,OAAD,EAAgB;AAC1B,UAAM,GAAG,GAAG,IAAI,IAAJ,EAAZ;AAEA,IAAA,OAAO,GAAG,IAAI,GAAG,CAAC,WAAJ,EAAiB,aAAa,KAAK,OAAO,IAAI,OAAO,EAAnE;;AAEA,QAAI,KAAK,YAAT,EAAuB;AACrB,MAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;AACD;AACF;;AAMM,EAAA,MAAM,CAAC,UAAD,EAAuB;AAClC,UAAM,IAAI,KAAJ,CAAU,8BAAV,CAAN;AACD;;AA9C2B;;AAA9B,OAAA,CAAA,iBAAA,GAAA,iBAAA;AA8DA,MAAM,kBAAkB,GAAG;AACvB,EAAA,QAAQ,EAAE,QAAQ,CAAC,SADI;AAEvB,EAAA,UAAU,EAAE;AAFW,CAA3B;;AAQA,MAAa,kBAAb,CAA+B;AAM7B,EAAA,WAAA,CAAY,MAAA,GAAuB,EAAnC,EAAuC,iBAAvC,EAA4E;AAC1E,SAAK,MAAL,GAAc;AACZ,MAAA,QAAQ,EAAE,MAAM,CAAC,QAAP,KAAoB,SAApB,GAAgC,MAAM,CAAC,QAAvC,GAAkD,kBAAkB,CAAC,QADnE;AAEZ,MAAA,UAAU,EAAE,MAAM,CAAC,UAAP,KAAsB,SAAtB,GAAkC,MAAM,CAAC,UAAzC,GAAsD,kBAAkB,CAAC,UAFzE;AAGZ,MAAA,YAAY,EAAE,MAAM,CAAC;AAHT,KAAd;AAKA,SAAK,kBAAL,GAA0B,iBAA1B;;AACA,QAAI,KAAK,MAAL,CAAY,UAAZ,IAA0B,CAAC,KAAK,kBAApC,EAAwD;AACtD,YAAM,IAAI,KAAJ,CAAU,2DAAV,CAAN;AACD;;AACD,SAAK,iBAAL,GAAyB,KAAK,qBAAL,EAAzB;AACD;;AAES,EAAA,qBAAqB,GAAA;AAC7B,UAAM,IAAI,KAAJ,CAAU,8BAAV,CAAN;AACD;;AAEM,EAAA,oBAAoB,GAAA;AACzB,WAAO,KAAK,iBAAZ;AACD;;AAEM,EAAA,iBAAiB,CAAC,WAAD,EAAoB;AAC1C,UAAM,IAAI,KAAJ,CAAU,8BAAV,CAAN;AACD;;AA7B4B;;AAA/B,OAAA,CAAA,kBAAA,GAAA,kBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LoggerProviderBase = exports.ServiceLoggerBase = exports.DiagnosticsLoggerBase = exports.LogLevel = exports.LogStyle = void 0;\nvar LogStyle;\n(function (LogStyle) {\n    LogStyle[\"verbose\"] = \"info\";\n    LogStyle[\"info\"] = \"info\";\n    LogStyle[\"imp\"] = \"imp\";\n    LogStyle[\"warn\"] = \"warn\";\n    LogStyle[\"err\"] = \"err\";\n})(LogStyle = exports.LogStyle || (exports.LogStyle = {}));\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"verbose\"] = 0] = \"verbose\";\n    LogLevel[LogLevel[\"debug\"] = 1] = \"debug\";\n    LogLevel[LogLevel[\"important\"] = 2] = \"important\";\n    LogLevel[LogLevel[\"warn\"] = 3] = \"warn\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nclass DiagnosticsLoggerBase {\n    constructor(logLevel, logToFiles, fileLogger) {\n        this.logLevel = logLevel;\n        this.includeStackTrace = this.logLevel <= LogLevel.debug ? true : false;\n        this.logToFiles = logToFiles;\n        this.fileLogger = fileLogger;\n    }\n    write(content) {\n        this.debug(content);\n    }\n    verbose(content) {\n        if (this.logLevel > LogLevel.verbose) {\n            return;\n        }\n        this.log(LogStyle.verbose, content);\n    }\n    debug(content) {\n        if (this.logLevel > LogLevel.debug) {\n            return;\n        }\n        this.log(LogStyle.info, content);\n    }\n    imp(content) {\n        if (this.logLevel > LogLevel.important) {\n            return;\n        }\n        this.log(LogStyle.imp, content);\n    }\n    warn(content) {\n        this.log(LogStyle.warn, content);\n    }\n    err(content) {\n        this.log(LogStyle.err, content);\n    }\n    log(style, content) {\n        throw new Error('Not implmented in base class');\n    }\n}\nexports.DiagnosticsLoggerBase = DiagnosticsLoggerBase;\nclass ServiceLoggerBase {\n    constructor(service, logLevel, logToFiles, stream) {\n        this.service = service;\n        this.logLevel = logLevel;\n        this.logToFiles = logToFiles;\n        this.stream = stream;\n        this.logToConsole = this.logLevel <= LogLevel.debug;\n    }\n    log(serviceLog) {\n        this.write(this.format(serviceLog));\n    }\n    write(message) {\n        const now = new Date();\n        message = `[${now.toUTCString()}] service=${this.service} ${message}`;\n        if (this.logToConsole) {\n            console.log(message);\n        }\n    }\n    format(serviceLog) {\n        throw new Error('Not implmented in base class');\n    }\n}\nexports.ServiceLoggerBase = ServiceLoggerBase;\nconst DEFAULT_LOG_CONFIG = {\n    logLevel: LogLevel.important,\n    logToFiles: false\n};\nclass LoggerProviderBase {\n    constructor(config = {}, fileLoggerFactory) {\n        this.config = {\n            logLevel: config.logLevel !== undefined ? config.logLevel : DEFAULT_LOG_CONFIG.logLevel,\n            logToFiles: config.logToFiles !== undefined ? config.logToFiles : DEFAULT_LOG_CONFIG.logToFiles,\n            logDirectory: config.logDirectory,\n        };\n        this._fileLoggerFactory = fileLoggerFactory;\n        if (this.config.logToFiles && !this._fileLoggerFactory) {\n            throw new Error(\"Must provide a FileLoggerFactory in order to log to files\");\n        }\n        this._diagnosticLogger = this._makeDiagnosticLogger();\n    }\n    _makeDiagnosticLogger() {\n        throw new Error('Not implmented in base class');\n    }\n    getDiagnosticsLogger() {\n        return this._diagnosticLogger;\n    }\n    makeServiceLogger(serviceName) {\n        throw new Error('Not implmented in base class');\n    }\n}\nexports.LoggerProviderBase = LoggerProviderBase;\n//# sourceMappingURL=logger-base.js.map"]},"metadata":{},"sourceType":"script"}